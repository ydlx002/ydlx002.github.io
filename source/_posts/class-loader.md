---
title: Java类加载概述
date: 2018-03-22 14:26:37
tags: 
 - java
 - jvm
categories: java
---
# 类的加载      
&#160; &#160; &#160; &#160;类的加载是将.class等二进制文件读入内存，最终形成可被JVM直接使用的Java类型，并对外提供访问接口的过程。加载.class文件的方式有:
* 本地文件中直接加载
* 从jar等归档文件中加载
* 从网络中加载
* 动态编译.java获取
* 从专用数据库中加载   

<!--more-->
# 类的生命周期   
&#160; &#160; &#160; &#160;类从加载到回收包含了: `加载`-->`验证`-->`准备`-->`解析`-->`初始化`-->`使用`-->`卸载`7个阶段。其中，验证、准备和解析这三个部分统称为连接。为了支持Java语言的动态绑定，解析阶段有时候会在`初始化`之后完成。
## 加载
该部分通常完成以下三个步骤：
1. 通过类的全限定名获取类的二进制字节流
2. 将字节流所代表的静态存储结构转化为方法区运行时的数据结构
3. 在Java堆中生成该类的java.lang.Class对象，作为方法区该数据的访问入口。  

加载过程可由系统提供的类加载器完成，也可由用于自定义类加载器完成。加载与连接交叉进行，并在时间上保持着先后。

## 连接
&#160; &#160; &#160; &#160;把类的二进制数据合并到JRE的过程。包含`校验`、`准备`、`解析`三个步骤。  
* 校验：用于检查.class文件数据的正确性;
* 准备：为类的静态变量分配存储空间;
* 解析：将符号引用转成直接引用。  

# 初始化
&#160; &#160; &#160; &#160;为类的静态变量赋予初始值。